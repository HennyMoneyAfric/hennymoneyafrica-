name: Auto Update Music & Tours

on:
  schedule:
    - cron: '0 0 * * 0' # every Sunday at midnight UTC
  workflow_dispatch:

jobs:
  update-site:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout repository
        uses: actions/checkout@v6

      - name: Set up Node.js
        uses: actions/setup-node@v3
        with:
          node-version: '20'

      - name: Auto-update update.js
        run: |
          echo "Updating music & tour info..."
          node -e "
            const fs = require('fs');
            const date = new Date().toISOString();
            fs.writeFileSync('update.js', `// Last updated: ${date}\nconsole.log('Update complete');`);
          "
          git config --global user.name "HennyMoneyAfric"
          git config --global user.email "hennymoneyafric@outlook.com"
          git add update.js
          git commit -m 'Auto-update music & tours'
          git push

      - name: Complete
        run: echo "Workflow finished!"
